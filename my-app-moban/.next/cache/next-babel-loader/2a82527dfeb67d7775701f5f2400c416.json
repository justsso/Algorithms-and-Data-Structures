{"ast":null,"code":"const fs = require('fs');\n\nimport { join } from 'path';\nimport matter from 'gray-matter';\n\nconst hljs = require('highlight.js');\n\nconst postsDirectory = join(process.cwd(), '_posts');\nconst data_struturesDirectory = join(process.cwd(), '../data_structures');\nconst leetcode_jsDirectory = join(process.cwd(), '../leetcode_js'); //返回两类\n\nexport function getPostSlugs() {\n  // return fs.readdirSync(postsDirectory)\n  let files = fs.readdirSync(data_struturesDirectory);\n  let files2 = fs.readdirSync(leetcode_jsDirectory);\n  files = files.map(item => {\n    join(data_struturesDirectory, item);\n  });\n  files2 = files2.map(item => {\n    join(leetcode_jsDirectory, item);\n  });\n  console.log(files, files2, 14);\n  return {\n    data_strutures: files,\n    leetcode: files2\n  };\n}\nexport function getPostBySlug(slug, fields = []) {\n  const realSlug = slug;\n  console.log(slug, 313131);\n  const suffix = slug.slice(slug.lastIndexOf('.')); // const fullPath = join(postsDirectory, `${realSlug}`)\n\n  const fileContents = fs.readFileSync(slug, 'utf8');\n  let items = {};\n\n  if (suffix === '.md') {\n    const {\n      data,\n      content\n    } = matter(fileContents); // Ensure only the minimal needed data is exposed\n\n    fields.forEach(field => {\n      if (field === 'slug') {\n        items[field] = realSlug;\n      }\n\n      if (field === 'content') {\n        items[field] = content;\n      }\n\n      if (data[field]) {\n        items[field] = data[field];\n      }\n    });\n  } else {\n    //返回js文件内容\n    items.slug = slug;\n    items.title = slug; // items.date = new Date()\n\n    const highlightedCode = hljs.highlightAuto(fileContents).value;\n    items.content = highlightedCode;\n  }\n\n  return items;\n}\nexport function getAllPosts(fields = []) {\n  const {\n    data_strutures,\n    leetcode\n  } = getPostSlugs(); // console.log(data_strutures, leetcode, 68)\n\n  const posts1 = data_strutures.map(slug => getPostBySlug(slug, fields)) // sort posts by date in descending order\n  .sort((post1, post2) => post1.date > post2.date ? '-1' : '1');\n  const posts2 = leetcode.map(item => getPostBySlug(item, fields)).sort((post1, post2) => post1.date > post2.date ? '-1' : '1');\n  return {\n    posts1,\n    posts2\n  };\n}\ngetAllPosts();","map":{"version":3,"sources":["/Users/ssojust/gitproject/Algorithms-and-Data-Structures/my-app-moban/lib/api.js"],"names":["fs","require","join","matter","hljs","postsDirectory","process","cwd","data_struturesDirectory","leetcode_jsDirectory","getPostSlugs","files","readdirSync","files2","map","item","console","log","data_strutures","leetcode","getPostBySlug","slug","fields","realSlug","suffix","slice","lastIndexOf","fileContents","readFileSync","items","data","content","forEach","field","title","highlightedCode","highlightAuto","value","getAllPosts","posts1","sort","post1","post2","date","posts2"],"mappings":"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","sourcesContent":["const  fs  = require('fs')\nimport {join} from 'path'\nimport matter from 'gray-matter'\nconst hljs = require('highlight.js');\nconst postsDirectory = join(process.cwd(), '_posts')\nconst data_struturesDirectory = join(process.cwd(), '../data_structures')\nconst leetcode_jsDirectory = join(process.cwd(), '../leetcode_js')\n\n//返回两类\nexport function getPostSlugs() {\n    // return fs.readdirSync(postsDirectory)\n    let files = fs.readdirSync(data_struturesDirectory);\n    let files2 = fs.readdirSync(leetcode_jsDirectory);\n    files = files.map(item => {\n        join(data_struturesDirectory, item)\n    })\n\n    files2 = files2.map(item => {\n        join(leetcode_jsDirectory, item)\n    })\n    console.log(files, files2, 14)\n\n\n    return {\n        data_strutures: files,\n        leetcode: files2\n    }\n}\n\nexport function getPostBySlug(slug, fields = []) {\n    const realSlug = slug\n    console.log(slug, 313131)\n    const suffix =  slug.slice(slug.lastIndexOf('.'))\n    // const fullPath = join(postsDirectory, `${realSlug}`)\n    const fileContents = fs.readFileSync(slug, 'utf8')\n    let items = {}\n    if(suffix === '.md'){\n        const {data, content} = matter(fileContents)\n        // Ensure only the minimal needed data is exposed\n        fields.forEach(field => {\n            if (field === 'slug') {\n                items[field] = realSlug\n            }\n            if (field === 'content') {\n                items[field] = content\n            }\n\n            if (data[field]) {\n                items[field] = data[field]\n            }\n        })\n    }else {\n        //返回js文件内容\n\n        items.slug = slug\n        items.title = slug\n        // items.date = new Date()\n        const highlightedCode =\n         hljs.highlightAuto(  fileContents  ).value\n        items.content = highlightedCode\n\n    }\n\n    return items\n}\n\nexport function getAllPosts(fields = []) {\n    const {data_strutures, leetcode} = getPostSlugs()\n    // console.log(data_strutures, leetcode, 68)\n    const posts1 = data_strutures\n        .map(slug => getPostBySlug(slug, fields))\n        // sort posts by date in descending order\n        .sort((post1, post2) => (post1.date > post2.date ? '-1' : '1'))\n    const posts2 = leetcode\n        .map(item => getPostBySlug(item ,fields))\n        .sort((post1, post2) => (post1.date > post2.date ? '-1' : '1'))\n    return {posts1, posts2}\n}\n\ngetAllPosts()\n"]},"metadata":{},"sourceType":"module"}