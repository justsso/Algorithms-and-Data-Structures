{"ast":null,"code":"import fs from 'fs';\nimport { join } from 'path';\nimport matter from 'gray-matter';\n\nconst hljs = require('highlight.js');\n\nconst data_struturesDirectory = join(process.cwd(), '../data_structures');\nconst leetcode_jsDirectory = join(process.cwd(), '../leetcode_js/'); //返回两类\n\nexport function getPostSlugs() {\n  // return fs.readdirSync(postsDirectory)\n  let files = fs.readdirSync(data_struturesDirectory);\n  let files2 = fs.readdirSync(leetcode_jsDirectory);\n  return {\n    data_strutures: files,\n    leetcode: files2\n  };\n}\nexport function getPostBySlug(slug, fields = []) {\n  const realSlug = slug;\n  const suffix = slug.slice(slug.lastIndexOf('.')); // const fullPath = join(postsDirectory, `${realSlug}`)\n\n  let fileContents;\n  const stat = fs.statSync(leetcode_jsDirectory + slug);\n  const isDirectory = stat.isDirectory();\n\n  if (!isDirectory) {\n    fileContents = fs.readFileSync(leetcode_jsDirectory + slug, 'utf8');\n  }\n\n  let items = {};\n\n  if (suffix === '.md') {\n    const {\n      data,\n      content\n    } = matter(fileContents); // Ensure only the minimal needed data is exposed\n\n    fields.forEach(field => {\n      if (field === 'slug') {\n        items[field] = realSlug;\n      }\n\n      if (field === 'content') {\n        items[field] = content;\n      }\n\n      if (data[field] === 'date') {\n        let stat = fs.statSync();\n        items[field] = data[field];\n      }\n    });\n  } else if (suffix === '.js') {\n    //返回js文件内容\n    fields.forEach(field => {\n      if (field === 'slug') {\n        items[field] = slug;\n      }\n\n      if (field === 'content') {\n        const highlightedCode = hljs.highlightAuto(fileContents).value;\n        items[field] = highlightedCode;\n      }\n\n      if (field === 'date') {\n        items[field] = stat.birthtime.getTime();\n      }\n    });\n  }\n\n  return items;\n}\nexport function getAllPosts(fields = []) {\n  const {\n    data_strutures,\n    leetcode\n  } = getPostSlugs(); // console.log(data_strutures, leetcode, 68)\n  // const posts1 = data_strutures\n  //     .map(slug => getPostBySlug(slug, fields))\n  //     // sort leetcode by date in descending order\n  //     .sort((post1, post2) => (post1.date > post2.date ? '-1' : '1'))\n\n  const posts2 = leetcode.map(item => getPostBySlug(item, fields)).sort((post1, post2) => post1.date > post2.date ? '-1' : '1');\n  return {\n    posts2\n  };\n}","map":{"version":3,"sources":["/Users/ssojust/gitproject/Algorithms-and-Data-Structures/my-app-moban/lib/api.js"],"names":["fs","join","matter","hljs","require","data_struturesDirectory","process","cwd","leetcode_jsDirectory","getPostSlugs","files","readdirSync","files2","data_strutures","leetcode","getPostBySlug","slug","fields","realSlug","suffix","slice","lastIndexOf","fileContents","stat","statSync","isDirectory","readFileSync","items","data","content","forEach","field","highlightedCode","highlightAuto","value","birthtime","getTime","getAllPosts","posts2","map","item","sort","post1","post2","date"],"mappings":"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","sourcesContent":["import fs from 'fs'\nimport {join} from 'path'\nimport matter from 'gray-matter'\n\nconst hljs = require('highlight.js');\nconst data_struturesDirectory = join(process.cwd(), '../data_structures')\nconst leetcode_jsDirectory = join(process.cwd(), '../leetcode_js/')\n\n//返回两类\nexport function getPostSlugs() {\n    // return fs.readdirSync(postsDirectory)\n    let files = fs.readdirSync(data_struturesDirectory);\n    let files2 = fs.readdirSync(leetcode_jsDirectory);\n\n    return {\n        data_strutures: files,\n        leetcode: files2\n    }\n}\n\nexport function getPostBySlug(slug, fields = []) {\n    const realSlug = slug\n    const suffix = slug.slice(slug.lastIndexOf('.'))\n    // const fullPath = join(postsDirectory, `${realSlug}`)\n    let fileContents;\n    const stat =  fs.statSync(leetcode_jsDirectory+slug)\n    const isDirectory = stat.isDirectory()\n    if (!isDirectory) {\n        fileContents = fs.readFileSync(leetcode_jsDirectory+slug, 'utf8')\n    }\n    let items = {}\n    if (suffix === '.md') {\n        const {data, content} = matter(fileContents)\n        // Ensure only the minimal needed data is exposed\n        fields.forEach(field => {\n            if (field === 'slug') {\n                items[field] = realSlug\n            }\n            if (field === 'content') {\n                items[field] = content\n            }\n\n            if (data[field] === 'date') {\n                let stat = fs.statSync()\n                items[field] = data[field]\n            }\n        })\n    } else if (suffix === '.js') {\n        //返回js文件内容\n\n        fields.forEach(field => {\n            if(field === 'slug'){\n                items[field] = slug\n            }\n            if(field === 'content') {\n                const highlightedCode =\n                    hljs.highlightAuto(fileContents).value\n                items[field] = highlightedCode\n            }\n            if(field === 'date') {\n                items[field] = stat.birthtime.getTime()\n            }\n        })\n\n    }\n\n    return items\n}\n\nexport function getAllPosts(fields = []) {\n    const {data_strutures, leetcode} = getPostSlugs()\n    // console.log(data_strutures, leetcode, 68)\n    // const posts1 = data_strutures\n    //     .map(slug => getPostBySlug(slug, fields))\n    //     // sort leetcode by date in descending order\n    //     .sort((post1, post2) => (post1.date > post2.date ? '-1' : '1'))\n    const posts2 = leetcode\n        .map(item => getPostBySlug(item, fields))\n        .sort((post1, post2) => (post1.date > post2.date ? '-1' : '1'))\n    return { posts2}\n}\n\n"]},"metadata":{},"sourceType":"module"}