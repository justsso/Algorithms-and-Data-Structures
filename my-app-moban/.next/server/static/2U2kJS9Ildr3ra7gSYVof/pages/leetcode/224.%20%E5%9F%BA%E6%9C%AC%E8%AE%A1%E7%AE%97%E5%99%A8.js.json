{"pageProps":{"post":{"date":"2021 / 3 / 1","slug":"224. 基本计算器.js","content":"<pre> <code class=\"hljs\" ><span class=\"hljs-comment\">//实现一个基本的计算器来计算一个简单的字符串表达式的值。</span>\n<span class=\"hljs-comment\">//</span>\n<span class=\"hljs-comment\">// 字符串表达式可以包含左括号 ( ，右括号 )，加号 + ，减号 -，非负整数和空格  。</span>\n\n<span class=\"hljs-comment\">/**\n * <span class=\"hljs-doctag\">@param <span class=\"hljs-type\">{string}</span> <span class=\"hljs-variable\">s</span></span>\n * <span class=\"hljs-doctag\">@return <span class=\"hljs-type\">{number}</span></span>\n */</span>\n<span class=\"hljs-comment\">//思路： 利用栈的思想</span>\n<span class=\"hljs-comment\">//    注意：数字可以是多位数</span>\n<span class=\"hljs-keyword\">var</span> calculate = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">s</span>) </span>{\n    <span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>, zhan = [];\n    <span class=\"hljs-keyword\">let</span> str = <span class=\"hljs-string\">'0123456789'</span>;\n    <span class=\"hljs-keyword\">while</span> (i &lt; s.length) {\n        <span class=\"hljs-keyword\">if</span> (s[i] === <span class=\"hljs-string\">'('</span> || s[i] === <span class=\"hljs-string\">'+'</span> || s[i] === <span class=\"hljs-string\">'-'</span>) {\n            zhan.push(s[i])\n            i++\n        } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (s[i] === <span class=\"hljs-string\">')'</span>) {\n            <span class=\"hljs-comment\">//一直到栈的(出现，全部出栈</span>\n            <span class=\"hljs-keyword\">let</span> index = zhan.lastIndexOf(<span class=\"hljs-string\">'('</span>)\n            <span class=\"hljs-keyword\">let</span> slice_arr = zhan.slice(index)\n            zhan.splice(index)\n            <span class=\"hljs-keyword\">let</span> sum = <span class=\"hljs-number\">0</span>;\n            <span class=\"hljs-keyword\">let</span> fuhao = <span class=\"hljs-string\">\"\"</span>;\n            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> j = <span class=\"hljs-number\">1</span>; j &lt; slice_arr.length; j++) {\n                <span class=\"hljs-keyword\">if</span> (slice_arr[j] === <span class=\"hljs-string\">'+'</span>) {\n                    fuhao = slice_arr[j]\n                } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (slice_arr[j] === <span class=\"hljs-string\">'-'</span>) {\n                    fuhao = slice_arr[j]\n                } <span class=\"hljs-keyword\">else</span> {\n                    <span class=\"hljs-keyword\">if</span> (fuhao === <span class=\"hljs-string\">'+'</span>) {\n                        sum += slice_arr[j]\n                    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (fuhao === <span class=\"hljs-string\">'-'</span>) {\n                        sum -= slice_arr[j]\n                    } <span class=\"hljs-keyword\">else</span> {\n                        <span class=\"hljs-keyword\">if</span> (slice_arr[j] !== <span class=\"hljs-string\">'('</span> &amp;&amp; slice_arr[j] !== <span class=\"hljs-string\">')'</span>) {\n                            sum = slice_arr[j]\n                        }\n                    }\n                }\n            }\n            zhan.push(sum)\n            i++\n        } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (str.indexOf(s[i]) !== <span class=\"hljs-number\">-1</span>) {\n            <span class=\"hljs-comment\">//取出数字</span>\n            <span class=\"hljs-keyword\">let</span> _num = <span class=\"hljs-string\">\"\"</span>\n            <span class=\"hljs-keyword\">while</span> (str.indexOf(s[i]) !== <span class=\"hljs-number\">-1</span> &amp;&amp; i &lt; s.length) {\n                _num = _num + s[i]\n                i++\n            }\n\n            <span class=\"hljs-comment\">//如果栈顶是符号，和栈为空，则压入;</span>\n            <span class=\"hljs-keyword\">if</span> (zhan.length === <span class=\"hljs-number\">0</span> || zhan[zhan.length - <span class=\"hljs-number\">1</span>] === <span class=\"hljs-string\">'+'</span> || zhan[zhan.length - <span class=\"hljs-number\">1</span>] === <span class=\"hljs-string\">'-'</span> || zhan[zhan.length - <span class=\"hljs-number\">1</span>] === <span class=\"hljs-string\">'('</span>) {\n                zhan.push(<span class=\"hljs-built_in\">Number</span>(_num))\n            }\n        } <span class=\"hljs-keyword\">else</span> {\n            i ++\n        }\n    }\n\n    <span class=\"hljs-comment\">//计算栈中的值</span>\n    <span class=\"hljs-keyword\">let</span> sum = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">let</span> fuhao = <span class=\"hljs-string\">\"\"</span>;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> j = <span class=\"hljs-number\">0</span>; j &lt; zhan.length; j++) {\n        <span class=\"hljs-keyword\">if</span> (zhan[j] === <span class=\"hljs-string\">'+'</span>) {\n            fuhao = <span class=\"hljs-string\">'+'</span>\n        } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (zhan[j] === <span class=\"hljs-string\">'-'</span>) {\n            fuhao = <span class=\"hljs-string\">'-'</span>\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">if</span> (fuhao === <span class=\"hljs-string\">'+'</span>) {\n                sum += zhan[j]\n            } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (fuhao === <span class=\"hljs-string\">'-'</span>) {\n                sum -= zhan[j]\n            } <span class=\"hljs-keyword\">else</span> {\n                <span class=\"hljs-keyword\">if</span> (zhan[j] !== <span class=\"hljs-string\">'('</span> &amp;&amp; zhan[j] !== <span class=\"hljs-string\">')'</span>) {\n                    sum = zhan[j]\n                }\n            }\n        }\n    }\n    <span class=\"hljs-keyword\">return</span> sum\n};\n\n<span class=\"hljs-comment\">// console.log(calculate(\"(1+(4+5+2)-3)+(6+8)\"))</span>\n<span class=\"hljs-built_in\">console</span>.log(calculate(<span class=\"hljs-string\">\"2147483647\"</span>))\n<span class=\"hljs-comment\">// console.log(calculate(\"12+34\"))</span>\n<span class=\"hljs-comment\">// console.log(calculate(\"1 + 1\"))</span>\n</code> </pre>"}},"__N_SSG":true}