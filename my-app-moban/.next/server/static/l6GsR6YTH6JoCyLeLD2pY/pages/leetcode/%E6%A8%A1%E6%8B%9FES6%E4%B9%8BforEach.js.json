{"pageProps":{"post":{"date":"2021 / 3 / 1","slug":"模拟ES6之forEach.js","content":"<pre> <code class=\"hljs\" ><span class=\"hljs-comment\">// 数组中 forEach 用法</span>\n<span class=\"hljs-keyword\">let</span> arr = [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]\n<span class=\"hljs-keyword\">let</span> f = {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'jkl'</span>}\narr.forEach(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">value, index, array</span>) </span>{\n    <span class=\"hljs-built_in\">console</span>.log(value, index, array, <span class=\"hljs-keyword\">this</span>)\n})\n\n\n<span class=\"hljs-comment\">//自己实现 forEach，用call</span>\n<span class=\"hljs-built_in\">Array</span>.prototype.forEach = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">callbackFn, thisArg = undefined</span>) </span>{\n    <span class=\"hljs-comment\">//用for循环遍历每个元素</span>\n    <span class=\"hljs-keyword\">let</span> len = <span class=\"hljs-keyword\">this</span>.length\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; len; i++) {\n        callbackFn.call(thisArg, <span class=\"hljs-keyword\">this</span>[i], i, <span class=\"hljs-keyword\">this</span>)\n    }\n}\n\n<span class=\"hljs-comment\">//自己实现forEach， 用bind （bind)返回一个函数</span>\n<span class=\"hljs-built_in\">Array</span>.prototype.forEach = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">callbackFn, thisArg</span>) </span>{\n    <span class=\"hljs-keyword\">let</span> callBack = callbackFn.bind(thisArg)\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-keyword\">this</span>.length; i++) {\n        callBack(<span class=\"hljs-keyword\">this</span>[i], i, <span class=\"hljs-keyword\">this</span>)\n    }\n}\n</code> </pre>"}},"__N_SSG":true}